<div class="row m-5 d-flex flex-nowrap justify-content-center">
  <div class="card col-md-6 text-center me-2">
    <div class="col">
      <div class="mt-3 mb-3">
        <img [src]="imgUrl" class="rounded-circle" width="180px" height="180px"/>
      </div>
      <div class="mb-3">
        <h5 class="pb-0 mb-0">{{userDto.lastName}}&nbsp;{{userDto.firstName}}</h5>
        <small class="form-text text-muted pt-0 mt-0">
          {{userDto.addessDto?.address}}&nbsp;{{userDto.addessDto?.city}}&nbsp;{{userDto.addessDto?.country}}
        </small>
      </div>
      <div class="row d-flex flex-nowrap justify-content-center mb-3">
        <div class="col-md-5 p-0 text-end me-3">
          <button type="button" class="btn btn-primary btn-sm">
            <i class="fas fa-pencil"></i>&nbsp;Modifier le profil
          </button>
        </div>
        <div class="col-md-7 p-0 text-start">
          <button type="button" class="btn btn-warning btn-sm" (click)="changerMoDePasse()">
            <i class="fas fa-lock"></i>&nbsp;Changer le mot de passe
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="card col-md-6">
    <table class="table">
      <tbody>
        <tr>
          <th scope="row">Nom complet</th>
          <td>{{userDto.lastName}}&nbsp;{{userDto.firstName}}</td>
        </tr>
        <tr>
          <th scope="row">Email</th>
          <td>{{userDto.email}}</td>
        </tr>
        <tr>
          <th scope="row">Nom d'utilisateur</th>
          <td>{{userDto.username}}</td>
        </tr>
        <tr>
          <th scope="row">Adresse</th>
          <td>
            {{userDto.addessDto?.address}}/&nbsp;{{userDto.addessDto?.city}}/&nbsp;{{userDto.addessDto?.country}}
          </td>
        </tr>
        <tr>
          <th scope="row">Ecole</th>
          <td>{{userDto.schoolDto?.name}}</td>
        </tr>
        <tr>
          <th scope="row">Roles</th>
          <td>
            <small *ngFor="let role of userDto.rolesDtos">
              {{role?.roleName}}&nbsp;&nbsp;&nbsp;
            </small>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <th scope="row" class="pt-4">&nbsp;</th>
        <td class="pt-4 text-end">
          <button type="button" class="btn btn-sm btn-success bg-success"
                  data-bs-toggle="modal" data-bs-target="#exampleModal">
            <i class="fas fa-link"></i>&nbsp;Attacher un role
          </button>
        </td>
      </tfoot>
    </table>
  </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Attacher un role a l'utilisateur</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <input type="text" class="form-control form-control-sm"
                   placeholder="Utilisateur" name="username" [(ngModel)]="username" [value]="username">
          </div>
          <div class="mb-3">
            <select class="form-select form-select-sm"  name="rolename" [(ngModel)]="roleUserForm.rolename">
              <option *ngFor="let role of listRole" [value]="role.roleName">{{role.roleName}}</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger btn-sm" data-bs-dismiss="modal">
          <i class="fas fa-ban"></i>&nbsp;Annuler
        </button>
        <button type="button" class="btn btn-primary btn-sm"  (click)="addRoleToUser()">
          <i class="fas fa-save"></i>&nbsp;Enregistrer
        </button>
      </div>
    </div>
  </div>
</div>
